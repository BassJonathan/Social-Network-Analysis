---
title: "Assignment"
output: pdf_document
---

```{r setup, include=FALSE}
# Verändere Titel, Namen & Datum in dem Yaml header am Beginn des files!

# Globale Chunk Optionen:
knitr::opts_chunk$set(echo = TRUE)

# Loading / Installing packages depending on whether it is already installed.
uP <- function(...) {
  x <- list(...)
  for(p in x) {
    if (!is.element(p, installed.packages()[,1])) {install.packages(p,dep = TRUE, repos = "http://cran.wu.ac.at")}
    library(p, character.only = TRUE)}
}
uP('tidyverse', 'tidygraph', 'ggraph', 'tidylog')
```

<!-- Bitte Meta Infos anpassen -->

| __Meta Infos__  |                                            |    
|-----------------|--------------------------------------------|
| Student:in      | Jonathan Baß                               |
| Titel           | Hier könnte der Titel ihrer Arbeit stehen! |
| Kurskontext     | Social Network Analysis                    |
| Datum           | insertdate                                 |
| Dozent          | Philipp M. Mendoza, M.Sc.                  |
<!-- Hilfe für Tabellen: https://www.tablesgenerator.com/latex_tables -->
Für weitere Anleitungen und Tipps siehe den [Syllabus](https://pmmendoza.notion.site/Syllabus-2021-c93a917f658649df854dd3035358cb73) und den [Eintrag zur Portfolioprüfung](https://pmmendoza.notion.site/Portfoliopr-fung-ein-paar-Tipps-2d5b6d52e1784006b22021d6dbe0b377).  

Wichtig: das ganze sollte in der Form eines Blogpostes geschrieben sein; sprich ein Fließtext!
Nachfolgend ein Vorschlag der Strukturierung eurer Arbeit; in jedem Report sollten *zumindest* die hier angeführten Punkte abgedeckt werden.

### Executive Summary 
_Dies ist die einzige Sektzion die in Bullet points angeführt werden soll._

* Forschungsfrage
* Datensatz
* Strategie
* Ergebnisse

### Einleitung und Fragestellung  

* Thema
* Daten
* Forschungsfrage
* Relevanz der Forschungsfrage ("_so what_?")

### Analysestrategie  

* Operationalisierung eurer Forschungsfrage (welche Maße verwendet ihr um eure Forschungsfrage zu beantworten und warum?)
* Charakterisierung des Netzwerks
* Kontext der verwendeten Daten

### Umsetzung  

* Datenmanipulationen
* Erklärung der Schritte
* Interpretation der Visualisierungen 

### Conclusio  

* Wiederholung der Fragestellung
* Zusammenfassung der zentralen Ergebnisse
* (_Limitationen, weiterführende Kommentare, etc._)

|-------------------------------------------------------------|

## Install packages
```{r}
# install.packages("igraph", dependencies = T)
# install.packages("igraphdata", dependencies = T)
# install.packages("tidygraph", dependencies = T)
# install.packages("tidyverse", dependencies = T)
# install.packages("ggraph", dependencies = T)
# install.packages("ggthemes", dependencies = TRUE) # a collection of a lot of themes for dataviz!
# install.packages("gganimate", dependencies = TRUE) # an dynamic animation package
# install.packages("gifski", dependencies = TRUE) # an engine to render gifs
# install.packages("rnetcarto", dependencies = TRUE)
```

## Setup libraries
```{r}
library(igraph)
library(igraphdata)

library(ggraph)
library(ggthemes)
library(gganimate)
library(gifski)

library(tidyverse)
library(tidygraph)

library(RColorBrewer)
library(rnetcarto)
```


## Remove old data
```{r}
rm(list = ls())
```


## Initialize data
```{r}
data("rfid")
#rfid
```


## Remove loops as well as directional data and store as dataframe
```{r}
df <- as.undirected(simplify(rfid))
#df
```

## Identify roles
```{r}
df.mat=as_adjacency_matrix(df, sparse = F)
head(df.mat, 1)
```

## Add professions from dataframe
```{r}
rnc=netcarto(df.mat)
rnc
```

## Number of modules
```{r}
df %>% as_tbl_graph() %>% activate(nodes) %>% mutate(name = row_number()) -> klm
klm
```

## Plot
```{r}
test <- merge(x = klm , y = rnc[[1]], by = "name", all = TRUE)
head(test, 10)
```

## Plot
```{r warning=FALSE}
ggplot(test, aes(y = connectivity, x = participation)) + 
  geom_point(aes(color=Status, shape=role, size=module))
```